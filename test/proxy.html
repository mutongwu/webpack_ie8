<!DOCTYPE html>
<html>
    <head>
	    <meta charset="UTF-8" />
		<meta content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" name="viewport" />
		<meta content="yes" name="apple-mobile-web-app-capable" />
		<meta content="black" name="apple-mobile-web-app-status-bar-style" />
		<meta content="telephone=no" name="format-detection" />
		<title></title>
	</head>
	<body>
		
	<script type="text/javascript" src="../src/lib/json3.min.js"></script>
	<script type="text/javascript" src="../src/lib/messenger.js"></script>
	<script>
		var IFRAME_NAME = 'vsc_cors_iframe', 
			PARENT_NAME = 'vsc_cors_parent', 
			NAME_PREFIX = 'vip_secure_code';
		var messenger = new Messenger(IFRAME_NAME, NAME_PREFIX);

	    function sendMessage(msg) {
	        messenger.targets[PARENT_NAME].send(JSON.stringify(msg));
	    }
		messenger.addTarget(window.parent, PARENT_NAME); 

	    messenger.listen(function (msg) {
	        
	        console.log('iframe recive:', msg);

	        var o = JSON.parse(msg);
	        sendMessage({
	        	code: 200,
	        	data: {
	        		hello: 1000
	        	}
	        });

	         console.log('iframe sendMessage:');
	    });
	</script>
	</body>
</html>